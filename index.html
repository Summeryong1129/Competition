<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>健康數據挑戰賽</title>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
font-family: 'Arial', sans-serif;
}

body {
background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
min-height: 100vh;
padding: 20px;
}

.container {
max-width: 1000px;
margin: 0 auto;
}

header {
text-align: center;
margin-bottom: 30px;
padding: 20px;
background: white;
border-radius: 15px;
box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

h1 {
color: #2c3e50;
margin-bottom: 10px;
}

.subtitle {
color: #7f8c8d;
font-size: 1.1em;
}

.week-display {
display: flex;
justify-content: center;
gap: 10px;
margin: 20px 0;
flex-wrap: wrap;
}

.day {
width: 40px;
height: 40px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
flex-direction: column;
font-weight: bold;
cursor: pointer;
transition: all 0.3s;
background: #ecf0f1;
color: #7f8c8d;
}

.day.active {
background: #3498db;
color: white;
transform: scale(1.1);
}

.day.has-data {
background: #2ecc71;
color: white;
}

.upload-section {
display: flex;
gap: 20px;
margin-bottom: 30px;
flex-wrap: wrap;
}

.user-card {
flex: 1;
min-width: 300px;
background: white;
padding: 25px;
border-radius: 15px;
box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.user-card h3 {
color: #2c3e50;
margin-bottom: 20px;
padding-bottom: 10px;
border-bottom: 2px solid #eee;
display: flex;
align-items: center;
gap: 10px;
}

.upload-area {
border: 2px dashed #3498db;
border-radius: 10px;
padding: 30px;
text-align: center;
margin-bottom: 20px;
cursor: pointer;
transition: all 0.3s;
background: #f8f9fa;
}

.upload-area:hover {
background: #e3f2fd;
border-color: #2980b9;
}

.upload-area i {
font-size: 40px;
color: #3498db;
margin-bottom: 10px;
}

.data-display {
background: #f8f9fa;
padding: 15px;
border-radius: 10px;
margin-top: 20px;
}

.data-item {
display: flex;
justify-content: space-between;
margin: 10px 0;
padding: 10px;
background: white;
border-radius: 8px;
transition: all 0.3s;
}

.data-item:hover {
transform: translateX(5px);
box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.score-display {
text-align: center;
font-size: 1.5em;
font-weight: bold;
color: #e74c3c;
margin-top: 15px;
padding-top: 15px;
border-top: 2px solid #eee;
}

.score-breakdown {
background: rgba(52, 152, 219, 0.1);
padding: 12px;
border-radius: 8px;
margin-top: 15px;
border-left: 4px solid #3498db;
}

.breakdown-item {
display: flex;
justify-content: space-between;
margin: 8px 0;
padding: 5px 0;
}

.breakdown-item span:first-child {
color: #7f8c8d;
}

.breakdown-item span:last-child {
font-weight: bold;
color: #2c3e50;
}

.scoring-rules {
background: white;
padding: 20px;
border-radius: 15px;
margin-bottom: 20px;
box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.scoring-rules h3 {
color: #2c3e50;
margin-bottom: 15px;
text-align: center;
}

.rules-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 15px;
}

.rule-card {
background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
padding: 15px;
border-radius: 10px;
text-align: center;
border: 2px solid transparent;
transition: all 0.3s;
}

.rule-card:hover {
border-color: #3498db;
transform: translateY(-3px);
}

.rule-card h4 {
color: #2c3e50;
margin-bottom: 8px;
font-size: 1.1em;
}

.rule-card p {
color: #7f8c8d;
margin: 5px 0;
font-size: 0.9em;
}

.results-section {
background: white;
padding: 25px;
border-radius: 15px;
box-shadow: 0 4px 15px rgba(0,0,0,0.1);
margin-top: 20px;
}

.winner-banner {
background: linear-gradient(135deg, #f9d423 0%, #ff4e50 100%);
color: white;
padding: 15px;
border-radius: 10px;
text-align: center;
font-size: 1.2em;
font-weight: bold;
margin-bottom: 20px;
}

.stats-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 15px;
margin: 20px 0;
}

.stat-card {
background: #f8f9fa;
padding: 15px;
border-radius: 10px;
text-align: center;
}

.stat-card h4 {
color: #7f8c8d;
margin-bottom: 10px;
}

.stat-value {
font-size: 1.8em;
font-weight: bold;
color: #2c3e50;
}

button {
background: #3498db;
color: white;
border: none;
padding: 12px 25px;
border-radius: 8px;
cursor: pointer;
font-size: 1em;
font-weight: bold;
transition: all 0.3s;
margin-top: 10px;
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
width: 100%;
}

button:hover {
background: #2980b9;
transform: translateY(-2px);
box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

button:disabled {
background: #bdc3c7;
cursor: not-allowed;
transform: none;
box-shadow: none;
}

.hidden {
display: none;
}

.preview-image {
max-width: 100%;
margin-top: 15px;
border-radius: 8px;
border: 2px solid #ddd;
}

.loading {
text-align: center;
padding: 20px;
color: #3498db;
}

.loading i {
font-size: 30px;
margin-bottom: 10px;
animation: spin 1s linear infinite;
}

@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<div class="container">
<header>
<h1><i class="fas fa-trophy"></i> 健康數據挑戰賽</h1>
<p class="subtitle">上傳你的健康數據截圖，與朋友一較高下！</p>
<div class="week-display" id="weekDays">
<!-- 日期將由JavaScript動態生成 -->
</div>
</header>

<div class="scoring-rules">
<h3><i class="fas fa-percentage"></i> 計分規則</h3>
<div class="rules-grid">
<div class="rule-card">
<h4>卡路里 (50%)</h4>
<p>每 8 kcal = 1分</p>
<p>目標: 400 kcal = 50分</p>
</div>
<div class="rule-card">
<h4>步數 (50%)</h4>
<p>每 160 步 = 1分</p>
<p>目標: 8,000 步 = 50分</p>
</div>
<div class="rule-card">
<h4>總分計算</h4>
<p>卡路里得分 + 步數得分</p>
<p>滿分: 100分/日</p>
</div>
</div>
</div>

<div class="upload-section">
<!-- 用戶1卡片 -->
<div class="user-card" id="user1Card">
<h3><i class="fas fa-user"></i> 我</h3>
<div class="upload-area" onclick="document.getElementById('user1Upload').click()">
<i class="fas fa-cloud-upload-alt"></i>
<p>點擊上傳今日數據截圖</p>
<p class="subtitle">支持格式: PNG, JPG</p>
</div>
<input type="file" id="user1Upload" accept="image/*" class="hidden" onchange="handleUpload(this, 'user1')">
<div id="user1Preview"></div>
<div id="user1Loading" class="loading hidden">
<i class="fas fa-spinner"></i>
<p>分析圖片中...</p>
</div>
<div class="data-display" id="user1Data">
<div class="data-item">
<span>卡路里 (kcal):</span>
<span id="user1Calories">--</span>
</div>
<div class="data-item">
<span>步數:</span>
<span id="user1Steps">--</span>
</div>
<div class="score-display">
今日得分: <span id="user1Score">0</span>
</div>
<div id="user1Breakdown"></div>
</div>
<button onclick="processImage('user1')" id="user1ProcessBtn" disabled>
<i class="fas fa-cogs"></i> 分析圖片
</button>
</div>

<!-- 用戶2卡片 -->
<div class="user-card" id="user2Card">
<h3><i class="fas fa-user-friends"></i> 朋友</h3>
<div class="upload-area" onclick="document.getElementById('user2Upload').click()">
<i class="fas fa-cloud-upload-alt"></i>
<p>點擊上傳今日數據截圖</p>
<p class="subtitle">支持格式: PNG, JPG</p>
</div>
<input type="file" id="user2Upload" accept="image/*" class="hidden" onchange="handleUpload(this, 'user2')">
<div id="user2Preview"></div>
<div id="user2Loading" class="loading hidden">
<i class="fas fa-spinner"></i>
<p>分析圖片中...</p>
</div>
<div class="data-display" id="user2Data">
<div class="data-item">
<span>卡路里 (kcal):</span>
<span id="user2Calories">--</span>
</div>
<div class="data-item">
<span>步數:</span>
<span id="user2Steps">--</span>
</div>
<div class="score-display">
今日得分: <span id="user2Score">0</span>
</div>
<div id="user2Breakdown"></div>
</div>
<button onclick="processImage('user2')" id="user2ProcessBtn" disabled>
<i class="fas fa-cogs"></i> 分析圖片
</button>
</div>
</div>

<div class="results-section">
<div id="winnerBanner" class="winner-banner hidden">
<!-- 獲勝者訊息將在這裡顯示 -->
</div>

<h2><i class="fas fa-chart-line"></i> 本週統計</h2>
<div class="stats-grid">
<div class="stat-card">
<h4>我的總分</h4>
<div class="stat-value" id="totalScore1">0</div>
</div>
<div class="stat-card">
<h4>朋友總分</h4>
<div class="stat-value" id="totalScore2">0</div>
</div>
<div class="stat-card">
<h4>本週勝場</h4>
<div class="stat-value" id="winCount">0 - 0</div>
</div>
<div class="stat-card">
<h4>已完成天數</h4>
<div class="stat-value" id="completedDays">0/7</div>
</div>
</div>

<button onclick="calculateWinner()" style="background: #2ecc71;">
<i class="fas fa-calculator"></i> 計算本週冠軍
</button>

<button onclick="resetWeek()" style="background: #e74c3c; margin-top: 10px;">
<i class="fas fa-redo"></i> 重設本週數據
</button>

<button onclick="exportData()" style="background: #9b59b6; margin-top: 10px;">
<i class="fas fa-download"></i> 導出數據
</button>
</div>
</div>

<script>
// 初始化數據
let weekData = {
user1: { scores: [0,0,0,0,0,0,0], data: [] },
user2: { scores: [0,0,0,0,0,0,0], data: [] }
};

let currentDay = new Date().getDay(); // 0=周日, 1=周一...
if (currentDay === 0) currentDay = 6; // 調整為周索引 (0-6)
else currentDay -= 1;

// OCR Worker
let ocrWorker = null;

// 初始化頁面
document.addEventListener('DOMContentLoaded', function() {
initWeekDisplay();
loadSavedData();
initOCR();
});

// 初始化OCR
async function initOCR() {
try {
// 延遲加載Tesseract
const Tesseract = window.Tesseract;
if (!Tesseract) {
console.log('Tesseract未載入');
return;
}

ocrWorker = await Tesseract.createWorker({
logger: m => console.log('OCR進度:', m)
});

await ocrWorker.loadLanguage('eng');
await ocrWorker.initialize('eng');
await ocrWorker.setParameters({
tessedit_char_whitelist: '0123456789/',
preserve_interword_spaces: '1'
});

console.log('OCR初始化完成');
} catch (error) {
console.error('OCR初始化失敗:', error);
}
}

// 初始化週日期顯示
function initWeekDisplay() {
const weekDaysDiv = document.getElementById('weekDays');
const days = ['MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT', 'SUN'];
const today = new Date();

for (let i = 0; i < 7; i++) {
const date = new Date(today);
date.setDate(today.getDate() - currentDay + i);
const dayNum = date.getDate();

const dayDiv = document.createElement('div');
dayDiv.className = 'day';
if (i === currentDay) dayDiv.classList.add('active');

dayDiv.innerHTML = `
<div style="font-size: 0.8em;">${days[i]}</div>
<div>${dayNum}</div>
`;

dayDiv.addEventListener('click', () => selectDay(i));
weekDaysDiv.appendChild(dayDiv);
}
}

// 選擇日期
function selectDay(dayIndex) {
currentDay = dayIndex;
const days = document.querySelectorAll('.day');
days.forEach((day, index) => {
day.classList.toggle('active', index === dayIndex);
});
updateDataDisplay();
}

// 處理圖片上傳
function handleUpload(input, userId) {
const file = input.files[0];
if (!file) return;

const previewDiv = document.getElementById(userId + 'Preview');
const processBtn = document.getElementById(userId + 'ProcessBtn');

// 顯示預覽
const reader = new FileReader();
reader.onload = function(e) {
previewDiv.innerHTML = `
<img id="${userId}Image" src="${e.target.result}" alt="上傳的圖片" class="preview-image">
<p style="margin-top: 5px; color: #666; font-size: 0.9em;">
已選擇: ${file.name}
</p>
`;
processBtn.disabled = false;
};
reader.readAsDataURL(file);
}

// 處理圖片分析
async function processImage(userId) {
const imageElement = document.getElementById(userId + 'Image');
if (!imageElement) {
alert('請先上傳圖片');
return;
}

const loadingDiv = document.getElementById(userId + 'Loading');
const processBtn = document.getElementById(userId + 'ProcessBtn');

// 顯示加載中
loadingDiv.classList.remove('hidden');
processBtn.disabled = true;
processBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 分析中...';

try {
// 使用OCR分析圖片
const healthData = await analyzeImageWithOCR(imageElement.src);

// 更新數據
updateUserData(userId, healthData);

// 標記該日期已有數據
const dayElement = document.querySelectorAll('.day')[currentDay];
dayElement.classList.add('has-data');

// 顯示成功訊息
showMessage('數據分析成功！', 'success');

} catch (error) {
console.error('圖片分析失敗:', error);
showMessage('分析失敗，請重試或手動輸入數據', 'error');

// 提供手動輸入選項
if (confirm('OCR分析失敗，是否手動輸入數據？')) {
const calories = prompt('請輸入卡路里 (kcal):', '0');
const steps = prompt('請輸入步數:', '0');

if (calories !== null && steps !== null) {
updateUserData(userId, {
calories: parseInt(calories) || 0,
steps: parseInt(steps) || 0
});
}
}
} finally {
// 隱藏加載中
loadingDiv.classList.add('hidden');
processBtn.disabled = false;
processBtn.innerHTML = '<i class="fas fa-cogs"></i> 分析圖片';
}
}

// 使用OCR分析圖片
async function analyzeImageWithOCR(imageSrc) {
// 如果OCR未初始化，使用模擬數據
if (!ocrWorker) {
console.log('使用模擬OCR數據');
return simulateOCR();
}

try {
const { data: { text } } = await ocrWorker.recognize(imageSrc);
console.log('OCR識別結果:', text);

return parseHealthData(text);
} catch (error) {
console.error('OCR識別失敗:', error);
throw error;
}
}

// 模擬OCR結果
function simulateOCR() {
return {
calories: Math.floor(Math.random() * 300) + 100, // 100-400之間
steps: Math.floor(Math.random() * 5000) + 3000 // 3000-8000之間
};
}

// 解析健康數據
function parseHealthData(text) {
const data = {
calories: 0,
steps: 0
};

// 尋找卡路里數據
const calorieMatch = text.match(/(\d+)\s*\/\s*\d+\s*(kcal|Calories?)/i) ||
text.match(/(\d+)\s*(kcal|Calories?)/i);
if (calorieMatch) {
data.calories = parseInt(calorieMatch[1]);
}

// 尋找步數數據
const stepsMatch = text.match(/(\d+)\s*\/\s*\d+\s*(steps|Steps)/i) ||
text.match(/(\d+)\s*(steps|Steps)/i);
if (stepsMatch) {
data.steps = parseInt(stepsMatch[1]);
}

// 如果沒有找到，嘗試匹配純數字
if (!data.calories || !data.steps) {
const numbers = text.match(/\d+/g);
if (numbers && numbers.length >= 2) {
if (!data.calories) data.calories = parseInt(numbers[0]) || 0;
if (!data.steps) data.steps = parseInt(numbers[1]) || 0;
}
}

// 數據驗證
if (data.calories > 5000) data.calories = 0;
if (data.steps > 50000) data.steps = 0;

return data;
}

// 計算得分 - 新規則：50%卡路里 + 50%步數
function calculateScore(data) {
const caloriesScore = Math.min((data.calories / 400) * 50, 50);
const stepsScore = Math.min((data.steps / 8000) * 50, 50);

return Math.floor(caloriesScore + stepsScore);
}

// 更新用戶數據
function updateUserData(userId, data) {
// 使用新計分規則
const score = calculateScore(data);
const caloriesScore = Math.floor((data.calories / 400) * 50);
const stepsScore = Math.floor((data.steps / 8000) * 50);

// 保存數據
weekData[userId].scores[currentDay] = score;
weekData[userId].data[currentDay] = data;

// 更新顯示
document.getElementById(userId + 'Calories').textContent = data.calories;
document.getElementById(userId + 'Steps').textContent = data.steps;
document.getElementById(userId + 'Score').textContent = score;

// 顯示得分細項
const breakdownDiv = document.getElementById(userId + 'Breakdown');
breakdownDiv.innerHTML = `
<div class="score-breakdown">
<div class="breakdown-item">
<span>卡路里得分:</span>
<span>${caloriesScore}/50</span>
</div>
<div class="breakdown-item">
<span>步數得分:</span>
<span>${stepsScore}/50</span>
</div>
</div>
`;

// 保存到本地存儲
saveData();

// 更新總分顯示
updateTotalScores();
}

// 更新數據顯示
function updateDataDisplay() {
const user1Data = weekData.user1.data[currentDay];
const user2Data = weekData.user2.data[currentDay];

// 更新用戶1數據
if (user1Data) {
document.getElementById('user1Calories').textContent = user1Data.calories;
document.getElementById('user1Steps').textContent = user1Data.steps;
document.getElementById('user1Score').textContent = weekData.user1.scores[currentDay];

const caloriesScore = Math.floor((user1Data.calories / 400) * 50);
const stepsScore = Math.floor((user1Data.steps / 8000) * 50);

document.getElementById('user1Breakdown').innerHTML = `
<div class="score-breakdown">
<div class="breakdown-item">
<span>卡路里得分:</span>
<span>${caloriesScore}/50</span>
</div>
<div class="breakdown-item">
<span>步數得分:</span>
<span>${stepsScore}/50</span>
</div>
</div>
`;
}

// 更新用戶2數據
if (user2Data) {
document.getElementById('user2Calories').textContent = user2Data.calories;
document.getElementById('user2Steps').textContent = user2Data.steps;
document.getElementById('user2Score').textContent = weekData.user2.scores[currentDay];

const caloriesScore = Math.floor((user2Data.calories / 400) * 50);
const stepsScore = Math.floor((user2Data.steps / 8000) * 50);

document.getElementById('user2Breakdown').innerHTML = `
<div class="score-breakdown">
<div class="breakdown-item">
<span>卡路里得分:</span>
<span>${caloriesScore}/50</span>
</div>
<div class="breakdown-item">
<span>步數得分:</span>
<span>${stepsScore}/50</span>
</div>
</div>
`;
}
}

// 計算總分
function updateTotalScores() {
const total1 = weekData.user1.scores.reduce((a, b) => a + b, 0);
const total2 = weekData.user2.scores.reduce((a, b) => a + b, 0);

document.getElementById('totalScore1').textContent = total1;
document.getElementById('totalScore2').textContent = total2;

// 計算勝場
let wins1 = 0, wins2 = 0;
for (let i = 0; i < 7; i++) {
if (weekData.user1.scores[i] > weekData.user2.scores[i]) wins1++;
else if (weekData.user2.scores[i] > weekData.user1.scores[i]) wins2++;
}
document.getElementById('winCount').textContent = `${wins1} - ${wins2}`;

// 計算已完成天數
const daysWithData = weekData.user1.data.filter(d => d).length;
document.getElementById('completedDays').textContent = `${daysWithData}/7`;
}

// 計算冠軍
function calculateWinner() {
const total1 = weekData.user1.scores.reduce((a, b) => a + b, 0);
const total2 = weekData.user2.scores.reduce((a, b) => a + b, 0);

const winnerBanner = document.getElementById('winnerBanner');

if (total1 > total2) {
winnerBanner.innerHTML = `
<i class="fas fa-crown"></i> 恭喜！本週冠軍：我
<br>
<small>${total1}分 vs ${total2}分</small>
`;
winnerBanner.style.background = 'linear-gradient(135deg, #f9d423 0%, #ff4e50 100%)';
} else if (total2 > total1) {
winnerBanner.innerHTML = `
<i class="fas fa-crown"></i> 本週冠軍：朋友
<br>
<small>${total2}分 vs ${total1}分</small>
`;
winnerBanner.style.background = 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)';
} else {
winnerBanner.innerHTML = `
<i class="fas fa-handshake"></i> 平手！兩人都是冠軍
<br>
<small>${total1}分</small>
`;
winnerBanner.style.background = 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)';
}

winnerBanner.classList.remove('hidden');
}

// 導出數據
function exportData() {
const dataStr = JSON.stringify(weekData, null, 2);
const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);

const exportFileDefaultName = `health-challenge-${new Date().toISOString().split('T')[0]}.json`;

const linkElement = document.createElement('a');
linkElement.setAttribute('href', dataUri);
linkElement.setAttribute('download', exportFileDefaultName);
linkElement.click();

showMessage('數據已導出！', 'success');
}

// 重設數據
function resetWeek() {
if (confirm('確定要重設本週所有數據嗎？這個操作無法復原！')) {
weekData = {
user1: { scores: [0,0,0,0,0,0,0], data: [] },
user2: { scores: [0,0,0,0,0,0,0], data: [] }
};

// 重置顯示
['user1', 'user2'].forEach(user => {
document.getElementById(user + 'Calories').textContent = '--';
document.getElementById(user + 'Steps').textContent = '--';
document.getElementById(user + 'Score').textContent = '0';
document.getElementById(user + 'Breakdown').innerHTML = '';
document.getElementById(user + 'Preview').innerHTML = '';
document.getElementById(user + 'Upload').value = '';
document.getElementById(user + 'ProcessBtn').disabled = true;
});

// 移除日期標記
document.querySelectorAll('.day').forEach(day => {
day.classList.remove('has-data');
});

// 隱藏獲勝者橫幅
document.getElementById('winnerBanner').classList.add('hidden');

updateTotalScores();
saveData();
showMessage('本週數據已重設！', 'success');
}
}

// 保存數據到本地存儲
function saveData() {
try {
const saveData = {
weekData: weekData,
currentDay: currentDay,
savedDate: new Date().toISOString()
};
localStorage.setItem('healthChallengeData', JSON.stringify(saveData));
} catch (error) {
console.error('保存數據失敗:', error);
}
}

// 加載保存的數據
function loadSavedData() {
try {
const saved = localStorage.getItem('healthChallengeData');
if (saved) {
const data = JSON.parse(saved);
weekData = data.weekData || weekData;

updateTotalScores();
updateDataDisplay();

// 更新日期標記
weekData.user1.data.forEach((data, index) => {
if (data) {
document.querySelectorAll('.day')[index].classList.add('has-data');
}
});
}
} catch (error) {
console.error('加載數據失敗:', error);
}
}

// 顯示訊息
function showMessage(message, type = 'info') {
const colors = {
success: '#2ecc71',
error: '#e74c3c',
info: '#3498db'
};

const messageDiv = document.createElement('div');
messageDiv.style.cssText = `
position: fixed;
top: 20px;
right: 20px;
background: ${colors[type] || colors.info};
color: white;
padding: 15px 20px;
border-radius: 8px;
box-shadow: 0 4px 12px rgba(0,0,0,0.2);
z-index: 1000;
animation: slideIn 0.3s ease;
max-width: 300px;
`;

messageDiv.innerHTML = `
<i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
${message}
`;

document.body.appendChild(messageDiv);

setTimeout(() => {
messageDiv.style.animation = 'slideOut 0.3s ease';
setTimeout(() => document.body.removeChild(messageDiv), 300);
}, 3000);

// 添加動畫樣式
if (!document.getElementById('messageAnimations')) {
const style = document.createElement('style');
style.id = 'messageAnimations';
style.textContent = `
@keyframes slideIn {
from { transform: translateX(100%); opacity: 0; }
to { transform: translateX(0); opacity: 1; }
}
@keyframes slideOut {
from { transform: translateX(0); opacity: 1; }
to { transform: translateX(100%); opacity: 0; }
}
`;
document.head.appendChild(style);
}
}
</script>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@v5/dist/tesseract.min.js"></script>
</body>
</html>